### **시스템 아키텍처 설계**  
시스템 아키텍처 설계 단계에서는 전체 프로젝트의 **구성 요소**, **모듈 간 관계**, **데이터 흐름**을 정의하고 **기술 스택**을 기반으로 구조를 시각화합니다.

---

## **1. 시스템 아키텍처 구성 요소**  

아래는 프로젝트의 주요 구성 요소와 역할입니다.

| **구성 요소**            | **설명**                                                                 |
|---------------------------|------------------------------------------------------------------------|
| **VSCode Extension**      | 사용자 단축키 입력, 프로젝트 상태 저장, Webview 기반 UI 표시.            |
| **파일 상태 추적 모듈**    | 변경된 파일 상태를 저장하고 diff 계산을 수행하는 핵심 로직.             |
| **LLM 요약 모듈**         | OpenAI API를 호출해 변경 사항을 요약 및 의도 분석.                       |
| **히스토리 관리 모듈**     | 요약된 로그를 누적 저장하고 Markdown 파일로 관리.                        |
| **UI 모듈 (Webview)**      | 대시보드, 캘린더, 작업 로그를 시각적으로 보여주는 프론트엔드 UI.         |
| **데이터 저장소**          | `.logTracker` 폴더에 변경 로그 및 상태 데이터를 저장 (로컬 파일 시스템).  |

---

## **2. 시스템 아키텍처 흐름도**

아래와 같은 **아키텍처 흐름**을 기반으로 시스템이 동작합니다.

```plaintext
+------------------------------------------------------+
|                    VSCode Extension                  |
| (단축키 입력 및 UI Webview)                          |
+---------------------------+--------------------------+
                            | 사용자 입력 발생
                            v
+-------------------+        +---------------------+    +------------------+
| 상태 저장 모듈   | <----> | 파일 상태 추적 모듈 | -> | diff 계산 모듈  |
| (.logTracker 저장) |        | 변경 사항 비교      |    | jsdiff 활용      |
+-------------------+        +---------------------+    +------------------+
                                                        |
                                                        v
                                              +-----------------+
                                              | LLM 요약 모듈   |
                                              | OpenAI API 호출 |
                                              +-----------------+
                                                        |
                                                        v
                                       +-----------------------------------+
                                       | 히스토리 관리 및 저장 모듈         |
                                       | Markdown 파일에 로그 누적 저장     |
                                       +-----------------------------------+
                                                        |
                                                        v
                                       +-----------------------------------+
                                       | UI 모듈 (Webview)                  |
                                       | - 프로젝트 요약                   |
                                       | - 달력 기반 작업 로그              |
                                       | - 기술 뉴스/팁 표시                |
                                       +-----------------------------------+
```

---

## **3. 모듈별 상세 설계**

### **1) 상태 저장 및 파일 추적 모듈**  
- **역할**: 프로젝트의 현재 상태를 `.logTracker` 폴더에 저장하고 변경 사항(diff)을 추적.  
- **기술**: Node.js 파일 시스템(`fs`), `jsdiff`  
- **작업 흐름**:  
   - 단축키 입력 시 현재 파일 상태 저장.  
   - 이전 상태와 현재 상태를 비교하여 diff 생성.

---

### **2) LLM 요약 모듈**  
- **역할**: diff 결과를 OpenAI API에 전송하여 요약 생성.  
- **기술**: OpenAI GPT API, LangChain (확장 시)  
- **작업 흐름**:  
   1. diff 데이터를 요약 가능한 텍스트 형태로 변환.  
   2. OpenAI API로 요약 요청.  
   3. 반환된 결과를 히스토리에 추가.

---

### **3) 히스토리 관리 모듈**  
- **역할**: 요약된 작업 로그를 누적 저장하고 Markdown 파일로 관리.  
- **기술**: Node.js `fs`  
- **데이터 구조**:  
```markdown
# 2024년 6월 작업 기록

## 6월 17일
- 파일 추가: `utils.js`
- 함수 수정: `calculateTotal()`
- 코드 삭제: `old_helpers.py` 제거

**요약**: 새로운 유틸리티 파일 추가 및 기존 헬퍼 함수 대체 작업.
```

---

### **4) UI 모듈 (Webview)**  
- **역할**: 프로젝트 상태와 작업 히스토리를 시각화.  
- **기술**:  
   - VSCode Webview API  
   - React.js (UI 컴포넌트)  
   - 캘린더: `react-calendar` or `fullcalendar.js`  
   - 차트: `chart.js`  

- **주요 화면**:  
   1. **대시보드**:  
      - 프로젝트 요약, 코드 변경 수, 스마트 요약 표시.  
   2. **캘린더 뷰**:  
      - 날짜별 로그 요약 표시 및 클릭 시 상세 로그.  
   3. **기술 뉴스/팁 섹션**:  
      - LLM을 활용해 관련 키워드로 요약된 뉴스 제공.

---

## **4. 데이터 흐름 설계**

1. **사용자 단축키 입력** → 상태 저장 모듈이 현재 상태 저장  
2. **변경 사항 추출** → 파일 상태 추적 모듈이 diff 계산  
3. **LLM 요약** → diff 결과를 OpenAI API에 전송하여 요약 생성  
4. **히스토리 업데이트** → Markdown 파일에 누적 저장  
5. **UI Webview** → 최신 작업 로그 및 시각화된 상태를 화면에 표시  

---

## **5. 기술 스택 정리**

| **구성 요소**            | **기술/도구**                          |
|---------------------------|---------------------------------------|
| **확장 개발**             | VSCode Extension API, Node.js         |
| **UI/프론트엔드**          | React.js, Webview API, Chart.js       |
| **파일 상태 추적**         | Node.js `fs` 모듈, `jsdiff`           |
| **LLM 요약**              | OpenAI GPT-4 API                     |
| **히스토리 관리**          | Markdown 파일 저장 (Node.js 기반)     |
| **달력 및 시각화**         | `react-calendar`, `chart.js`         |

---

## **6. 다음 단계**  
시스템 아키텍처 설계를 기반으로 **MVP 개발 단계**로 넘어가면 좋습니다.  
1. **상태 저장 및 diff 계산 모듈** 우선 구현  
2. **OpenAI API 연동**을 통한 요약 기능 테스트  
3. **기본 UI Webview 구성** (대시보드 및 캘린더)

이 단계가 완료되면 초기 버전을 실행하며 부족한 점을 개선할 수 있어요! 다음으로 무엇부터 구현해볼까요? 😊